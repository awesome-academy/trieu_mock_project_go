{{define "partials/admin_teams_search.html"}} {{if .error}}
<div class="alert alert-danger">{{.error}}</div>
{{else}}
<div class="table-responsive">
  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Leader</th>
        <th>Members Count</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {{range .teams}}
      <tr>
        <td>{{.ID}}</td>
        <td>{{.Name}}</td>
        <td>{{.Leader.Name}}</td>
        <td>{{len .Members}}</td>
        <td>
          <a href="/admin/teams/{{.ID}}/edit" class="btn btn-sm btn-primary"
            >Edit</a
          >
          <button
            class="btn btn-sm btn-danger delete-team-btn"
            data-id="{{.ID}}"
            data-name="{{.Name}}"
            aria-label="Delete team {{.Name}}"
          >
            Delete
          </button>
        </td>
      </tr>
      {{else}}
      <tr>
        <td colspan="5" class="text-center">No teams found</td>
      </tr>
      {{end}}
    </tbody>
  </table>
</div>

{{if gt .page.Total 0}}
<nav aria-label="Team pagination">
  <ul class="pagination justify-content-center">
    {{$currentOffset := .page.Offset}} {{$limit := .page.Limit}} {{$total :=
    .page.Total}}

    <li class="page-item {{if le $currentOffset 0}}disabled{{end}}">
      <a class="page-link" href="#" data-offset="{{sub $currentOffset $limit}}"
        >Previous</a
      >
    </li>

    <li class="page-item disabled">
      <span class="page-link">
        Showing {{add $currentOffset 1}} to {{min (int64 (add $currentOffset
        $limit)) $total}} of {{$total}}
      </span>
    </li>

    <li
      class="page-item {{if ge (int64 (add $currentOffset $limit)) $total}}disabled{{end}}"
    >
      <a class="page-link" href="#" data-offset="{{add $currentOffset $limit}}"
        >Next</a
      >
    </li>
  </ul>
</nav>
{{end}} {{end}} {{end}}
